[
   {
      "id": "_global_config",
      "match": ".*",
      "configuration.load.destinationTable.projectId":"{{{env.PROJECT_ID}}}",
      "configuration.load.destinationTable.datasetId":"{{{env.DATASET_ID}}}{{^env.DATASET_ID}}Staging{{/env.DATASET_ID}}",
      "configuration.load.createDisposition":"{{{env.CREATE_DISPOSITION}}}{{^env.CREATE_DISPOSITION}}CREATE_IF_NEEDED{{/env.CREATE_DISPOSITION}}",
      "configuration.load.writeDisposition":"{{{env.WRITE_DISPOSITION}}}{{^env.WRITE_DISPOSITION}}WRITE_APPEND{{/env.WRITE_DISPOSITION}}",
      "configuration.load.encoding":"{{{env.ENCODING}}}{{^env.ENCODING}}UTF-8{{/env.ENCODING}}",
	  "configuration.load.schemaUpdateOptions[0]": "ALLOW_FIELD_ADDITION",
	  "configuration.load.schemaUpdateOptions[1]": "ALLOW_FIELD_RELAXATION"
   },
   {
      "id": "_source_uri",
      "match": "(?<FILE_URI>.*)",
      "configuration.load.sourceUris[0]":"{{{groups.FILE_URI}}}"
   },
   {
      "id": "_table_naming",
      "match":"^gs\\:\\/\\/(?<FILE_BUCKET>[^\\/]+)(?:\\/(?<FILE_SUBDIR>.*))?\\/(?<FILE_NAME>.*?)(?:_(?<FILE_DATE>[\\d\\-\\_]+)*)?(?:\\.(?<FILE_EXTENSION>.*))?$",
      "configuration.load.destinationTable.tableId":"{{{groups.FILE_NAME}}}"
   },
   {
      "id":"_format_csv",
      "match":".+\\.csv$",
      "configuration.load.sourceFormat":"CSV",
      "configuration.load.autodetect":"True"
   },
   {
      "id":"_format_json",
      "match":".+\\.js(?:on)?$",
      "configuration.load.sourceFormat":"NEWLINE_DELIMITED_JSON",
      "configuration.load.ignoreUnknownValues":"True"
   },
   {
      "id":"_format_avro",
      "match":".+\\.avro$",
      "configuration.load.sourceFormat":"AVRO",
      "configuration.load.useAvroLogicalTypes":"True"
   }
]
